<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤šäººå”ä½œç°½ç½²ç³»çµ±</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        body { font-family: "Microsoft JhengHei", sans-serif; background: #f0f2f5; margin: 0; padding: 20px; text-align: center; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 30px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); border-radius: 8px; }
        
        /* åˆç´„åœ–ç‰‡ */
        #contract-img { width: 100%; border: 1px solid #ddd; display: block; margin-bottom: 20px; }
        
        /* ç°½ååˆ—è¡¨å€åŸŸ (Grid æ’åˆ—) */
        .signatures-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-top: 20px; border-top: 2px dashed #ccc; padding-top: 20px; }
        .sig-card { border: 1px solid #eee; padding: 10px; border-radius: 5px; text-align: left; background: #fff; }
        .sig-card img { width: 100%; height: 80px; object-fit: contain; border-bottom: 1px solid #eee; }
        .sig-info { font-size: 12px; color: #666; margin-top: 5px; }

        /* æŒ‰éˆ•ç¾¤ */
        .action-bar { position: fixed; bottom: 0; left: 0; width: 100%; background: white; padding: 15px; box-shadow: 0 -2px 10px rgba(0,0,0,0.1); display: flex; justify-content: center; gap: 10px; }
        button { padding: 12px 24px; border: none; border-radius: 50px; font-size: 16px; cursor: pointer; font-weight: bold; transition: 0.2s; }
        .btn-sign { background: #28a745; color: white; }
        .btn-download { background: #007bff; color: white; }
        .btn-admin { background: #6c757d; color: white; font-size: 12px; padding: 5px 10px; }
        
        /* ç°½åæ¿ Modal (å½ˆçª—) */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 1000; justify-content: center; align-items: center; }
        .modal-content { background: white; width: 90%; max-width: 500px; padding: 20px; border-radius: 10px; text-align: center; }
        canvas { border: 2px dashed #999; width: 100%; height: 250px; background: #fff; cursor: crosshair; touch-action: none; }
        
        /* ç®¡ç†è€…é¢æ¿ */
        #admin-panel { display: none; background: #e2e6ea; padding: 15px; margin-bottom: 20px; border-radius: 5px; }
    </style>
</head>
<body>

<div class="container" id="pdf-content">
    <div id="admin-panel">
        <h3>ğŸ”§ ç®¡ç†è€…å¾Œå°</h3>
        <p>1. ä¸Šå‚³æ–°åˆç´„åº•åœ–ï¼š</p>
        <input type="file" id="upload-input" accept="image/*">
        <button onclick="uploadTemplate()">ä¸Šå‚³ä¸¦æ›´æ–°</button>
        <hr>
        <p>2. æ¸…ç©ºä¸‹æ–¹æ‰€æœ‰ç°½åï¼š</p>
        <button onclick="clearSignatures()" style="background: #dc3545; color: white;">âš ï¸ æ¸…ç©ºç°½åç´€éŒ„</button>
        <button onclick="logout()" style="float:right;">ç™»å‡º</button>
    </div>

    <h2 id="doc-title">åˆç´„å…§å®¹</h2>
    <img id="contract-img" src="" alt="ç­‰å¾…åˆç´„è¼‰å…¥...">
    
    <div style="text-align: left; font-weight: bold; color: #555;">ğŸ“‹ å·²ç°½ç½²äººå“¡åˆ—è¡¨ï¼š</div>
    <div id="sig-list" class="signatures-grid">
        <p id="loading-text">æ­£åœ¨è®€å–ç°½ç½²ç´€éŒ„...</p>
    </div>
</div>

<div class="action-bar">
    <button class="btn-admin" onclick="checkAdmin()">Admin</button>
    <button class="btn-sign" onclick="openModal()">âœï¸ æˆ‘è¦ç°½å</button>
    <button class="btn-download" onclick="downloadMergedPDF()">ğŸ“¥ ä¸‹è¼‰å®Œæ•´åˆç´„(å«ç°½å)</button>
</div>

<div id="modal-sign" class="modal">
    <div class="modal-content">
        <h3>è«‹åœ¨æ­¤å€åŸŸç°½å</h3>
        <canvas id="pad"></canvas>
        <br><br>
        <button onclick="closeModal()" style="background:#ccc;">å–æ¶ˆ</button>
        <button onclick="clearPad()" style="background:#ffc107;">æ¸…é™¤</button>
        <button onclick="submitSign()" class="btn-sign">ç¢ºèªé€å‡º</button>
    </div>
</div>

<script src="script.js"></script>
</body>
</html>
